# Supplier

供应商应用，主要功能：

1. 帮助供应商进行订单管理，查询订单，进行订单发货；
2. 库存管理，管理商品库存。

本应用使用Python3，加强对Python的使用和理解。首先对接苏宁的API，提供作为苏宁供应商的相关管理功能。

## 工程结构介绍

### supplier目录

- MainProcess.py，主处理程序，主要处理过程：

1. 是定时调用OrderHandler查询订单;
2. 循环遍历订单，根据订单中的商品编码（ProductCode），调用StockHandler获取对应的库存信息做出库处理。
3. 如果出库成功，那么调用OrderHandler进行发货，再调用SendSMSHandler进行通知短信的发送。

以上处理过程会有以下几个异常场景：

1. 调用OrderHandler查询订单失败，如网络异常等，产生这种会直接退出应用程序；
2. 调用StockHandler进行出库，可能当前库存中没有对应的库存（例如，没有对应的商品编码的库存文件。当前商品编码库存文件中的数据使用完了）。如果产生这种异常，程序也会直接退出，并把异常信息记录到_error.txt日志文件中；
3. 调用OrderHandler进行发货，可以因为网络、或服务端暂时不可用，导致调用失败，产生这种异常会现在_error.txt日志文件中记录异常信息，并退出应用；
4. 调用SendSMSHandler进行通知短信的发送，可以因为网络、或服务端暂时不可用，导致调用失败，产生这种异常会现在_error.txt日志文件中记录异常信息，并退出应用；


以上情况，在应用退出后，需要根据_error.txt中的记录进行手工处理。
如果是发货失败，则需要手工发货，并手工发送通知短信。
如果是发送通知短信失败，需要手工发送通知短信。

- OrderHandler.py，订单处理模块，主要包括：

1. 销售订单查询；
2. 订单发货。

- StockHanlder.py，库存管理模块，主要包括：

1. 根据产品编码进行资源出库处理，返回资源信息（卡密）

- SendSMSHandler.py，发送通知短信模块，主要包括：

1. 根据产品编码获取短信模板，并根据订单信息组装短信，调用短信平台接口发送短信。
